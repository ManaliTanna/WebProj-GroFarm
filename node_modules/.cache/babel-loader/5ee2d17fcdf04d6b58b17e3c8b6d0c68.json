{"ast":null,"code":"var _jsxFileName = \"C:\\\\MANALI\\\\PES\\\\SEM3\\\\WebTech\\\\PROJECTS\\\\MERN-project\\\\src\\\\components\\\\create-product.component.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport Navbar from \"../components/navbar.component\";\nimport { getFromStorage } from \"../utils/storage\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faFileImage } from \"@fortawesome/free-solid-svg-icons\";\nexport default class CreateProduct extends Component {\n  constructor(props) {\n    super(props);\n\n    this.fileSelectedHandler = event => {\n      this.setState({\n        file: event.target.files[0]\n      });\n    };\n\n    this.onChangeProduct = this.onChangeProduct.bind(this);\n    this.onChangeDescription = this.onChangeDescription.bind(this);\n    this.onChangeType = this.onChangeType.bind(this);\n    this.onChangePrice = this.onChangePrice.bind(this);\n    this.onChangeSeason = this.onChangeSeason.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.state = {\n      userid: \"\",\n      product: \"\",\n      description: \"\",\n      type: \"\",\n      price: \"\",\n      season: \"\",\n      file: \"\",\n      users: [],\n      cookie: \"\"\n    };\n  }\n\n  componentDidMount() {\n    const obj = getFromStorage(\"the_main_app\");\n\n    if (obj && obj.cookie) {\n      const {\n        cookie\n      } = obj;\n      this.setState({\n        cookie: cookie,\n        season: \"Spring\"\n      });\n    }\n  }\n\n  onChangeProduct(e) {\n    this.setState({\n      product: e.target.value\n    });\n  }\n\n  onChangeDescription(e) {\n    this.setState({\n      description: e.target.value\n    });\n  }\n\n  onChangeType(e) {\n    this.setState({\n      type: e.target.value\n    });\n  }\n\n  onChangePrice(e) {\n    this.setState({\n      price: e.target.value\n    });\n  }\n\n  onChangeSeason(e) {\n    this.setState({\n      season: e.target.value\n    });\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    const fd = new FormData();\n    let aux = this.state.file.name.split(\".\");\n    const product = {\n      userid: this.state.cookie._id,\n      product: this.state.product,\n      description: this.state.description,\n      type: this.state.type,\n      price: this.state.price,\n      season: this.state.season,\n      format: aux[1]\n    };\n    axios.post(\"http://localhost:5000/products/add\", product).then(res => {\n      console.log(res.data);\n\n      if (res.data.status == \"OK\") {\n        if (this.state.file) {\n          fd.append(\"files\", this.state.file, res.data.id + \"-main.\" + aux[1]);\n          axios.post(\"http://localhost:5000/Upload/uploadproductphoto\", fd).then(res => {\n            console.log(res);\n          });\n        }\n      }\n    });\n    window.location = \"/createproduct\";\n  }\n\n  render() {\n    const {\n      cookie\n    } = this.state;\n\n    if (cookie) {\n      if (cookie.role == \"Client\") {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(Navbar, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }\n        }), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"container mt-5\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"h2\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 15\n          }\n        }, \"You dont have permissions to create a product as a Client\")));\n      } else {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"gray\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(Navbar, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }\n        }), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"container mt-5\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"h3\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 15\n          }\n        }, \"Add new product\"), /*#__PURE__*/React.createElement(\"form\", {\n          onSubmit: this.onSubmit,\n          className: \"create-product mt-5\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"form-group \",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"label\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 21\n          }\n        }, \"Product: \"), /*#__PURE__*/React.createElement(\"input\", {\n          type: \"text\",\n          required: true,\n          className: \"form-control\",\n          value: this.state.product,\n          onChange: this.onChangeProduct,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 21\n          }\n        })), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"form-group \",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"label\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 21\n          }\n        }, \"Description: \"), /*#__PURE__*/React.createElement(\"input\", {\n          type: \"text\",\n          required: true,\n          className: \"form-control\",\n          value: this.state.description,\n          onChange: this.onChangeDescription,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 21\n          }\n        })), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"form-group\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"label\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 21\n          }\n        }, \"Type: \"), /*#__PURE__*/React.createElement(\"input\", {\n          type: \"text\",\n          required: true,\n          className: \"form-control\",\n          value: this.state.type,\n          onChange: this.onChangeType,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 21\n          }\n        }))), /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"form-group\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"label\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 21\n          }\n        }, \"Price: \"), /*#__PURE__*/React.createElement(\"input\", {\n          type: \"number\",\n          required: true,\n          className: \"form-control\",\n          value: this.state.price,\n          onChange: this.onChangePrice,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 21\n          }\n        })), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"form-group\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"label\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 21\n          }\n        }, \"Season: \"), /*#__PURE__*/React.createElement(\"select\", {\n          className: \"form-control\",\n          required: true,\n          onChange: this.onChangeSeason,\n          value: this.state.season,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"option\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 23\n          }\n        }, \"Spring\"), /*#__PURE__*/React.createElement(\"option\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 23\n          }\n        }, \"Summer\"), /*#__PURE__*/React.createElement(\"option\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 23\n          }\n        }, \"Fall\"), /*#__PURE__*/React.createElement(\"option\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 23\n          }\n        }, \"Winter\"))), /*#__PURE__*/React.createElement(\"label\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 19\n          }\n        }, \"Image: \"), /*#__PURE__*/React.createElement(\"input\", {\n          type: \"file\",\n          className: \"ml-2 d-none\",\n          name: \"uploadimage\",\n          id: \"uploadimage\",\n          required: true,\n          accept: \"image/x-png,image/jpeg\",\n          onChange: this.fileSelectedHandler,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 19\n          }\n        }), /*#__PURE__*/React.createElement(\"label\", {\n          htmlFor: \"uploadimage\",\n          className: \"btn btn-sm btn-primary ml-3 whitelabel\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n          icon: faFileImage,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 21\n          }\n        }), \" Upload image\"), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"form-group\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"input\", {\n          type: \"submit\",\n          value: \"Create product\",\n          className: \"createbutton\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 21\n          }\n        }))))));\n      }\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Navbar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container mt-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 13\n        }\n      }, \"You must be logged in to create a product\")));\n    }\n  }\n\n}","map":{"version":3,"sources":["C:/MANALI/PES/SEM3/WebTech/PROJECTS/MERN-project/src/components/create-product.component.js"],"names":["React","Component","axios","Navbar","getFromStorage","FontAwesomeIcon","faFileImage","CreateProduct","constructor","props","fileSelectedHandler","event","setState","file","target","files","onChangeProduct","bind","onChangeDescription","onChangeType","onChangePrice","onChangeSeason","onSubmit","state","userid","product","description","type","price","season","users","cookie","componentDidMount","obj","e","value","preventDefault","fd","FormData","aux","name","split","_id","format","post","then","res","console","log","data","status","append","id","window","location","render","role"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport Navbar from \"../components/navbar.component\";\r\nimport { getFromStorage } from \"../utils/storage\";\r\n\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faFileImage } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nexport default class CreateProduct extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.onChangeProduct = this.onChangeProduct.bind(this);\r\n    this.onChangeDescription = this.onChangeDescription.bind(this);\r\n    this.onChangeType = this.onChangeType.bind(this);\r\n    this.onChangePrice = this.onChangePrice.bind(this);\r\n    this.onChangeSeason = this.onChangeSeason.bind(this);\r\n\r\n    this.onSubmit = this.onSubmit.bind(this);\r\n\r\n    this.state = {\r\n      userid: \"\",\r\n\r\n      product: \"\",\r\n      description: \"\",\r\n      type: \"\",\r\n      price: \"\",\r\n      season: \"\",\r\n      file: \"\",\r\n\r\n      users: [],\r\n      cookie: \"\",\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const obj = getFromStorage(\"the_main_app\");\r\n\r\n    if (obj && obj.cookie) {\r\n      const { cookie } = obj;\r\n\r\n      this.setState({\r\n        cookie: cookie,\r\n        season: \"Spring\",\r\n      });\r\n    }\r\n  }\r\n\r\n  onChangeProduct(e) {\r\n    this.setState({\r\n      product: e.target.value,\r\n    });\r\n  }\r\n\r\n  onChangeDescription(e) {\r\n    this.setState({\r\n      description: e.target.value,\r\n    });\r\n  }\r\n  onChangeType(e) {\r\n    this.setState({\r\n      type: e.target.value,\r\n    });\r\n  }\r\n\r\n  onChangePrice(e) {\r\n    this.setState({\r\n      price: e.target.value,\r\n    });\r\n  }\r\n\r\n  onChangeSeason(e) {\r\n    this.setState({\r\n      season: e.target.value,\r\n    });\r\n  }\r\n\r\n  onSubmit(e) {\r\n    e.preventDefault();\r\n    const fd = new FormData();\r\n    let aux = this.state.file.name.split(\".\");\r\n\r\n    const product = {\r\n      userid: this.state.cookie._id,\r\n      product: this.state.product,\r\n      description: this.state.description,\r\n      type: this.state.type,\r\n      price: this.state.price,\r\n      season: this.state.season,\r\n      format: aux[1],\r\n    };\r\n\r\n    axios.post(\"http://localhost:5000/products/add\", product).then((res) => {\r\n      console.log(res.data);\r\n      if (res.data.status == \"OK\") {\r\n        if (this.state.file) {\r\n          fd.append(\"files\", this.state.file, res.data.id + \"-main.\" + aux[1]);\r\n          axios\r\n            .post(\"http://localhost:5000/Upload/uploadproductphoto\", fd)\r\n            .then((res) => {\r\n              console.log(res);\r\n            });\r\n        }\r\n      }\r\n    });\r\n    window.location = \"/createproduct\";\r\n  }\r\n\r\n  fileSelectedHandler = (event) => {\r\n    this.setState({\r\n      file: event.target.files[0],\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { cookie } = this.state;\r\n    if (cookie) {\r\n      if (cookie.role == \"Client\") {\r\n        return (\r\n          <div>\r\n            <Navbar />\r\n            <div className=\"container mt-5\">\r\n              <h2>You dont have permissions to create a product as a Client</h2>\r\n            </div>\r\n          </div>\r\n        );\r\n      } else {\r\n        return (\r\n          <div className=\"gray\">\r\n            <Navbar />\r\n            <div className=\"container mt-5\">\r\n              <h3>Add new product</h3>\r\n              <form onSubmit={this.onSubmit} className=\"create-product mt-5\">\r\n                <div>\r\n                  <div className=\"form-group \">\r\n                    <label>Product: </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      required\r\n                      className=\"form-control\"\r\n                      value={this.state.product}\r\n                      onChange={this.onChangeProduct}\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"form-group \">\r\n                    <label>Description: </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      required\r\n                      className=\"form-control\"\r\n                      value={this.state.description}\r\n                      onChange={this.onChangeDescription}\r\n                    />\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label>Type: </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      required\r\n                      className=\"form-control\"\r\n                      value={this.state.type}\r\n                      onChange={this.onChangeType}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  <div className=\"form-group\">\r\n                    <label>Price: </label>\r\n                    <input\r\n                      type=\"number\"\r\n                      required\r\n                      className=\"form-control\"\r\n                      value={this.state.price}\r\n                      onChange={this.onChangePrice}\r\n                    />\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label>Season: </label>\r\n                    <select\r\n                      className=\"form-control\"\r\n                      required\r\n                      onChange={this.onChangeSeason}\r\n                      value={this.state.season}\r\n                    >\r\n                      <option>Spring</option>\r\n                      <option>Summer</option>\r\n                      <option>Fall</option>\r\n                      <option>Winter</option>\r\n                    </select>\r\n                  </div>\r\n                  <label>Image: </label>\r\n                  <input\r\n                    type=\"file\"\r\n                    className=\"ml-2 d-none\"\r\n                    name=\"uploadimage\"\r\n                    id=\"uploadimage\"\r\n                    required\r\n                    accept=\"image/x-png,image/jpeg\"\r\n                    onChange={this.fileSelectedHandler}\r\n                  />\r\n                  <label htmlFor=\"uploadimage\" className=\"btn btn-sm btn-primary ml-3 whitelabel\">\r\n                    <FontAwesomeIcon icon={faFileImage} /> Upload image\r\n                  </label>\r\n                  <div className=\"form-group\">\r\n                    <input\r\n                      type=\"submit\"\r\n                      value=\"Create product\"\r\n                      className=\"createbutton\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n    } else {\r\n      return (\r\n        <div>\r\n          <Navbar />\r\n          <div className=\"container mt-5\">\r\n            <h2>You must be logged in to create a product</h2>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}