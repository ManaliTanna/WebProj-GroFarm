{"ast":null,"code":"var _jsxFileName = \"C:\\\\MANALI\\\\PES\\\\SEM3\\\\WebTech\\\\MERN-project\\\\src\\\\components\\\\cart-list.component.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport \"../../src/index.css\";\nimport Navbar from \"./navbar.component\";\nimport { getFromStorage } from \"../utils/storage\";\n\nconst Product = props => /*#__PURE__*/React.createElement(\"div\", {\n  className: \"cart-item\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 8,\n    columnNumber: 3\n  }\n}, /*#__PURE__*/React.createElement(\"img\", {\n  className: \"cart-item-img\",\n  src: \"/productpics/\" + props.product.image,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 9,\n    columnNumber: 5\n  }\n}), /*#__PURE__*/React.createElement(\"p\", {\n  className: \"cart-item-name ml-4\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 13,\n    columnNumber: 5\n  }\n}, props.product.product), /*#__PURE__*/React.createElement(\"p\", {\n  className: \"cart-item-amount\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 14,\n    columnNumber: 5\n  }\n}, props.product.amount, \"kg\"), /*#__PURE__*/React.createElement(\"p\", {\n  className: \"cart-item-price\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 15,\n    columnNumber: 5\n  }\n}, props.product.price * props.product.amount, \"\\u20AC\"), /*#__PURE__*/React.createElement(\"a\", {\n  href: \"#\",\n  className: \"cart-item-delete\",\n  onClick: () => {\n    props.deleteProduct(props.product.productid);\n  },\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 18,\n    columnNumber: 5\n  }\n}, \"X\"));\n\nexport default class ProductsList extends Component {\n  constructor(props) {\n    super(props);\n    this.deleteProduct = this.deleteProduct.bind(this);\n    this.onChangeAdress = this.onChangeAdress.bind(this);\n    this.onChangeName = this.onChangeName.bind(this);\n    this.onChangePayment = this.onChangePayment.bind(this);\n    this.onChangePhone = this.onChangePhone.bind(this);\n    this.onChangeZip = this.onChangeZip.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.emptyCart = this.emptyCart.bind(this);\n    this.state = {\n      products: [],\n      cookie: \"\",\n      name: \"\",\n      adress: \"\",\n      phonenumber: \"\",\n      zipcode: \"\",\n      payment: \"\",\n      total: 0\n    };\n  }\n\n  componentDidMount() {\n    const {\n      cookie\n    } = getFromStorage(\"the_main_app\");\n    this.setState({\n      cookie: cookie\n    });\n    axios.get(\"http://localhost:5000/Cart/\" + cookie._id).then(response => {\n      console.log(response.data);\n      this.setState({\n        products: response.data\n      });\n      let total = 0;\n\n      for (let index = 0; index < response.data.length; index++) {\n        total += response.data[index].price * response.data[index].amount;\n      }\n\n      this.setState({\n        total: total\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  onChangeName(e) {\n    this.setState({\n      name: e.target.value\n    });\n  }\n\n  onChangeAdress(e) {\n    this.setState({\n      adress: e.target.value\n    });\n  }\n\n  onChangePhone(e) {\n    this.setState({\n      phonenumber: e.target.value\n    });\n  }\n\n  onChangeZip(e) {\n    this.setState({\n      zipcode: e.target.value\n    });\n  }\n\n  onChangePayment(e) {\n    this.setState({\n      payment: e.target.value\n    });\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    const info = {\n      idclient: this.state.cookie._id,\n      products: this.state.products,\n      name: this.state.name,\n      adress: this.state.adress,\n      phonenumber: this.state.phonenumber,\n      zipcode: this.state.zipcode,\n      payment: this.state.payment\n    };\n    console.log(info);\n    axios.post(\"http://localhost:5000/Cart/addcheckout\", info).then(res => {\n      console.log(res.data);\n\n      if (res.data == \"OK\") {\n        window.location = \"/MyCart\";\n      }\n    });\n  }\n\n  deleteProduct(id) {\n    fetch(\"http://localhost:5000/Cart\", {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        id: id,\n        userid: this.state.cookie\n      })\n    });\n    window.location = \"/MyCart\";\n  }\n\n  emptyCart() {\n    fetch(\"http://localhost:5000/Cart/delete\", {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        userid: this.state.cookie._id\n      })\n    });\n    window.location = \"/MyCart\";\n  }\n\n  keepShoping() {\n    window.location = \"/products\";\n  }\n\n  ProductList() {\n    return this.state.products.map(currentproduct => {\n      return /*#__PURE__*/React.createElement(Product, {\n        product: currentproduct,\n        deleteProduct: this.deleteProduct,\n        key: currentproduct.productid,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 9\n        }\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"gray\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Navbar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row d-flex justify-content-center mt-5 mb-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cart-box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }\n    }, \"(\", this.state.products.length, \")\"), \" Articles in\", \" \", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 17\n      }\n    }, \"your cart\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cold-md-12 cart-box-head d-flex align-items-center justify-content-center mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-7\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"mb-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 19\n      }\n    }, \"Product\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-5 d-flex d-row justify-content-between\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"mb-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 19\n      }\n    }, \"Quantity\"), /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"mb-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 19\n      }\n    }, \"Total\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cart-list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 15\n      }\n    }, this.ProductList()), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 d-flex justify-content-between ml-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"cart-actions\",\n      onClick: this.emptyCart,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 17\n      }\n    }, \"Empty cart\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"cart-actions\",\n      onClick: this.keepShoping,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 17\n      }\n    }, \"Continue shopping\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cart-box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 17\n      }\n    }, \"Shipping info\")), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onSubmit,\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row d-flex ml-3 pr-5 justify-content-between mb-5 mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 19\n      }\n    }, \"Name: \"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      required: true,\n      className: \"form-control\",\n      value: this.state.name,\n      onChange: this.onChangeName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row d-flex ml-3 pr-5 justify-content-between mb-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 19\n      }\n    }, \"Adress: \"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      required: true,\n      className: \"form-control\",\n      value: this.state.adress,\n      onChange: this.onChangeAdress,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row d-flex ml-3 pr-5 justify-content-between mb-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 19\n      }\n    }, \"Phone number: \"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      required: true,\n      className: \"form-control medium-input\",\n      value: this.state.phonenumber,\n      onChange: this.onChangePhone,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 19\n      }\n    }, \"Zip code: \"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      required: true,\n      className: \"form-control small-input\",\n      value: this.state.zipcode,\n      onChange: this.onChangeZip,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row d-flex ml-3 pr-5 justify-content-between mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 19\n      }\n    }, \"Payment: \"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      required: true,\n      className: \"form-control \",\n      value: this.state.payment,\n      onChange: this.onChangePayment,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex flex-column align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"total\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 17\n      }\n    }, \"Total : \", this.state.total, \"\\u20AC\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Proceed to checkout\",\n      className: \"createbutton\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 17\n      }\n    })))))));\n  }\n\n}","map":{"version":3,"sources":["C:/MANALI/PES/SEM3/WebTech/MERN-project/src/components/cart-list.component.js"],"names":["React","Component","axios","Navbar","getFromStorage","Product","props","product","image","amount","price","deleteProduct","productid","ProductsList","constructor","bind","onChangeAdress","onChangeName","onChangePayment","onChangePhone","onChangeZip","onSubmit","emptyCart","state","products","cookie","name","adress","phonenumber","zipcode","payment","total","componentDidMount","setState","get","_id","then","response","console","log","data","index","length","catch","error","e","target","value","preventDefault","info","idclient","post","res","window","location","id","fetch","method","headers","body","JSON","stringify","userid","keepShoping","ProductList","map","currentproduct","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"../../src/index.css\";\r\nimport Navbar from \"./navbar.component\";\r\nimport { getFromStorage } from \"../utils/storage\";\r\n\r\nconst Product = (props) => (\r\n  <div className=\"cart-item\">\r\n    <img\r\n      className=\"cart-item-img\"\r\n      src={\"/productpics/\" + props.product.image}\r\n    />\r\n    <p className=\"cart-item-name ml-4\">{props.product.product}</p>\r\n    <p className=\"cart-item-amount\">{props.product.amount}kg</p>\r\n    <p className=\"cart-item-price\">\r\n      {props.product.price * props.product.amount}€\r\n    </p>\r\n    <a\r\n      href=\"#\"\r\n      className=\"cart-item-delete\"\r\n      onClick={() => {\r\n        props.deleteProduct(props.product.productid);\r\n      }}\r\n    >\r\n      X\r\n    </a>\r\n  </div>\r\n);\r\n\r\nexport default class ProductsList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.deleteProduct = this.deleteProduct.bind(this);\r\n    this.onChangeAdress = this.onChangeAdress.bind(this);\r\n    this.onChangeName = this.onChangeName.bind(this);\r\n    this.onChangePayment = this.onChangePayment.bind(this);\r\n    this.onChangePhone = this.onChangePhone.bind(this);\r\n    this.onChangeZip = this.onChangeZip.bind(this);\r\n    this.onSubmit = this.onSubmit.bind(this);\r\n    this.emptyCart = this.emptyCart.bind(this);\r\n\r\n    this.state = {\r\n      products: [],\r\n      cookie: \"\",\r\n\r\n      name: \"\",\r\n      adress: \"\",\r\n      phonenumber: \"\",\r\n      zipcode: \"\",\r\n      payment: \"\",\r\n      total: 0,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { cookie } = getFromStorage(\"the_main_app\");\r\n\r\n    this.setState({\r\n      cookie: cookie,\r\n    });\r\n    axios\r\n      .get(\"http://localhost:5000/Cart/\" + cookie._id)\r\n      .then((response) => {\r\n        console.log(response.data);\r\n        this.setState({ products: response.data });\r\n        let total = 0;\r\n        for (let index = 0; index < response.data.length; index++) {\r\n          total += response.data[index].price * response.data[index].amount;\r\n        }\r\n        this.setState({ total: total });\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  onChangeName(e) {\r\n    this.setState({\r\n      name: e.target.value,\r\n    });\r\n  }\r\n\r\n  onChangeAdress(e) {\r\n    this.setState({\r\n      adress: e.target.value,\r\n    });\r\n  }\r\n\r\n  onChangePhone(e) {\r\n    this.setState({\r\n      phonenumber: e.target.value,\r\n    });\r\n  }\r\n\r\n  onChangeZip(e) {\r\n    this.setState({\r\n      zipcode: e.target.value,\r\n    });\r\n  }\r\n\r\n  onChangePayment(e) {\r\n    this.setState({\r\n      payment: e.target.value,\r\n    });\r\n  }\r\n\r\n  onSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    const info = {\r\n      idclient: this.state.cookie._id,\r\n      products: this.state.products,\r\n      name: this.state.name,\r\n      adress: this.state.adress,\r\n      phonenumber: this.state.phonenumber,\r\n      zipcode: this.state.zipcode,\r\n      payment: this.state.payment,\r\n    };\r\n\r\n    console.log(info);\r\n\r\n    axios.post(\"http://localhost:5000/Cart/addcheckout\", info).then((res) => {\r\n      console.log(res.data);\r\n      if (res.data == \"OK\") {\r\n        window.location = \"/MyCart\";\r\n      }\r\n    });\r\n  }\r\n\r\n  deleteProduct(id) {\r\n    fetch(\"http://localhost:5000/Cart\", {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        id: id,\r\n        userid: this.state.cookie,\r\n      }),\r\n    });\r\n\r\n    window.location = \"/MyCart\";\r\n  }\r\n  emptyCart() {\r\n    fetch(\"http://localhost:5000/Cart/delete\", {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        userid: this.state.cookie._id,\r\n      }),\r\n    });\r\n    window.location = \"/MyCart\";\r\n  }\r\n  keepShoping() {\r\n    window.location = \"/products\";\r\n  }\r\n  ProductList() {\r\n    return this.state.products.map((currentproduct) => {\r\n      return (\r\n        <Product\r\n          product={currentproduct}\r\n          deleteProduct={this.deleteProduct}\r\n          key={currentproduct.productid}\r\n        />\r\n      );\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"gray\">\r\n        <Navbar />\r\n        <div className=\"container mt-5\">\r\n          <div className=\"row d-flex justify-content-center mt-5 mb-5\">\r\n            <div className=\"cart-box\">\r\n              <h2>\r\n                <span>({this.state.products.length})</span> Articles in{\" \"}\r\n                <span>your cart</span>\r\n              </h2>\r\n              <div className=\"cold-md-12 cart-box-head d-flex align-items-center justify-content-center mb-3\">\r\n                <div className=\"col-md-7\">\r\n                  <h4 className=\"mb-0\">Product</h4>\r\n                </div>\r\n                <div className=\"col-md-5 d-flex d-row justify-content-between\">\r\n                  <h4 className=\"mb-0\">Quantity</h4>\r\n                  <h4 className=\"mb-0\">Total</h4>\r\n                </div>\r\n              </div>\r\n              <div className=\"cart-list\">{this.ProductList()}</div>\r\n              <div className=\"col-md-12 d-flex justify-content-between ml-0\">\r\n                <button className=\"cart-actions\" onClick={this.emptyCart}>\r\n                  Empty cart\r\n                </button>\r\n                <button className=\"cart-actions\" onClick={this.keepShoping}>\r\n                  Continue shopping\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div className=\"cart-box\">\r\n              <h2>\r\n                <span>Shipping info</span>\r\n              </h2>\r\n              <form onSubmit={this.onSubmit} className=\"col-md-12\">\r\n                <div className=\"row d-flex ml-3 pr-5 justify-content-between mb-5 mt-5\">\r\n                  <label>Name: </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    required\r\n                    className=\"form-control\"\r\n                    value={this.state.name}\r\n                    onChange={this.onChangeName}\r\n                  />\r\n                </div>\r\n                <div className=\"row d-flex ml-3 pr-5 justify-content-between mb-5\">\r\n                  <label>Adress: </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    required\r\n                    className=\"form-control\"\r\n                    value={this.state.adress}\r\n                    onChange={this.onChangeAdress}\r\n                  />\r\n                </div>\r\n                <div className=\"row d-flex ml-3 pr-5 justify-content-between mb-5\">\r\n                  <label>Phone number: </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    required\r\n                    className=\"form-control medium-input\"\r\n                    value={this.state.phonenumber}\r\n                    onChange={this.onChangePhone}\r\n                  />\r\n                  <label>Zip code: </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    required\r\n                    className=\"form-control small-input\"\r\n                    value={this.state.zipcode}\r\n                    onChange={this.onChangeZip}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"row d-flex ml-3 pr-5 justify-content-between mb-3\">\r\n                  <label>Payment: </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    required\r\n                    className=\"form-control \"\r\n                    value={this.state.payment}\r\n                    onChange={this.onChangePayment}\r\n                  />\r\n                </div>\r\n                <div className=\"d-flex flex-column align-items-center\">\r\n                <p className=\"total\">Total : {this.state.total}€</p>\r\n                <input\r\n                  type=\"submit\"\r\n                  value=\"Proceed to checkout\"\r\n                  className=\"createbutton\"\r\n                />\r\n             </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}