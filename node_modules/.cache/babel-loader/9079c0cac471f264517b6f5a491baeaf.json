{"ast":null,"code":"var _jsxFileName = \"C:\\\\MANALI\\\\PES\\\\SEM3\\\\WebTech\\\\PROJECTS\\\\MERN-project\\\\src\\\\components\\\\login.component.js\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Navbar from \"../components/navbar.component\";\nimport axios from \"axios\";\nimport { getFromStorage, setInStorage } from \"../utils/storage\";\nexport default class Login extends Component {\n  constructor(props) {\n    super(props);\n    this.onChangeEmail = this.onChangeEmail.bind(this);\n    this.onChangePassword = this.onChangePassword.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.state = {\n      cookie: \"\",\n      email: \"\",\n      password: \"\",\n      status: \"\",\n      statusclass: \"hidden\",\n      forgotclass: \"hidden\"\n    };\n  }\n\n  componentDidMount() {\n    const obj = getFromStorage(\"the_main_app\");\n\n    if (obj && obj.cookie) {\n      const {\n        cookie\n      } = obj;\n      this.setState({\n        cookie: cookie\n      });\n    }\n  }\n\n  onChangeEmail(e) {\n    this.setState({\n      email: e.target.value,\n      status: \"\",\n      statusclass: \"\",\n      forgotclass: \"hidden\"\n    });\n  }\n\n  onChangePassword(e) {\n    this.setState({\n      password: e.target.value,\n      status: \"\",\n      statusclass: \"\",\n      forgotclass: \"hidden\"\n    });\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    fetch(\"http://localhost:5000/users/login\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        email: this.state.email,\n        password: this.state.password\n      })\n    }).then(res => res.json()).then(json => {\n      if (json.success) {\n        setInStorage(\"the_main_app\", {\n          cookie: json.user\n        });\n        window.location = \"/login\";\n      } else {\n        console.log(json);\n\n        if (json == \"Wrong Parameters\") {\n          this.setState({\n            status: \"Invalid email or password\",\n            statusclass: \"mb-4 bold\",\n            forgotclass: \"mb-4\"\n          });\n        } else {\n          this.setState({\n            status: json,\n            statusclass: \"mb-4\"\n          });\n          console.log(json);\n          this.setState({\n            cookie: json.cookie\n          });\n        }\n      }\n    });\n  }\n\n  render() {\n    const {\n      cookie\n    } = this.state;\n\n    if (!cookie) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"login-bg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Navbar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container login-container mt-5 pt-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: this.onSubmit,\n        className: \"mt-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"login-logo\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 15\n        }\n      }, \"Login\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group mt-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 17\n        }\n      }, \"Email \"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"email\",\n        required: true,\n        className: \"form-control\" // placeholder=\"Example@gmail.com\"\n        ,\n        value: this.state.email,\n        onChange: this.onChangeEmail,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 17\n        }\n      }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"password\",\n        required: true,\n        className: \"form-control\" // placeholder=\"Password\"\n        ,\n        value: this.state.password,\n        onChange: this.onChangePassword,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"span\", {\n        className: this.state.statusclass,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 15\n        }\n      }, this.state.status, \" \"), /*#__PURE__*/React.createElement(\"span\", {\n        className: this.state.forgotclass,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 15\n        }\n      }, \"Forgot your password? click\", /*#__PURE__*/React.createElement(Link, {\n        className: \"ml-1\",\n        to: \"/forgotpassword\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 17\n        }\n      }, \"here\")), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"Log in\",\n        className: \"btn mb-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"mt-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 15\n        }\n      }, \"Don't have an account?\", /*#__PURE__*/React.createElement(Link, {\n        className: \"ml-1\",\n        to: \"/createuser\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 17\n        }\n      }, \"Register here\"), \" \"))));\n    } else {\n      window.location = \"/myprofile\";\n    }\n  }\n\n}","map":{"version":3,"sources":["C:/MANALI/PES/SEM3/WebTech/PROJECTS/MERN-project/src/components/login.component.js"],"names":["React","Component","Link","Navbar","axios","getFromStorage","setInStorage","Login","constructor","props","onChangeEmail","bind","onChangePassword","onSubmit","state","cookie","email","password","status","statusclass","forgotclass","componentDidMount","obj","setState","e","target","value","preventDefault","fetch","method","headers","body","JSON","stringify","then","res","json","success","user","window","location","console","log","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Navbar from \"../components/navbar.component\";\r\nimport axios from \"axios\";\r\nimport { getFromStorage, setInStorage } from \"../utils/storage\";\r\n\r\nexport default class Login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onChangeEmail = this.onChangeEmail.bind(this);\r\n    this.onChangePassword = this.onChangePassword.bind(this);\r\n    this.onSubmit = this.onSubmit.bind(this);\r\n\r\n    this.state = {\r\n      cookie: \"\",\r\n      email: \"\",\r\n      password: \"\",\r\n      status: \"\",\r\n      statusclass: \"hidden\",\r\n      forgotclass: \"hidden\",\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const obj = getFromStorage(\"the_main_app\");\r\n\r\n    if (obj && obj.cookie) {\r\n      const { cookie } = obj;\r\n      this.setState({\r\n        cookie: cookie,\r\n      });\r\n    }\r\n  }\r\n\r\n  onChangeEmail(e) {\r\n    this.setState({\r\n      email: e.target.value,\r\n      status: \"\",\r\n      statusclass: \"\",\r\n      forgotclass: \"hidden\",\r\n    });\r\n  }\r\n\r\n  onChangePassword(e) {\r\n    this.setState({\r\n      password: e.target.value,\r\n      status: \"\",\r\n      statusclass: \"\",\r\n      forgotclass: \"hidden\",\r\n    });\r\n  }\r\n\r\n  onSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    fetch(\"http://localhost:5000/users/login\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        email: this.state.email,\r\n        password: this.state.password,\r\n      }),\r\n    })\r\n      .then((res) => res.json())\r\n      .then((json) => {\r\n        if (json.success) {\r\n          setInStorage(\"the_main_app\", { cookie: json.user });\r\n\r\n          window.location = \"/login\";\r\n        } else {\r\n          console.log(json);\r\n          if (json == \"Wrong Parameters\") {\r\n            this.setState({\r\n              status: \"Invalid email or password\",\r\n              statusclass: \"mb-4 bold\",\r\n              forgotclass: \"mb-4\",\r\n            });\r\n          } else {\r\n            this.setState({\r\n              status: json,\r\n              statusclass: \"mb-4\",\r\n            });\r\n            console.log(json);\r\n            this.setState({\r\n              cookie: json.cookie,\r\n            });\r\n          }\r\n        }\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const { cookie } = this.state;\r\n    if (!cookie) {\r\n      return (\r\n        <div className=\"login-bg\">\r\n          <Navbar />\r\n          <div className=\"container login-container mt-5 pt-5\">\r\n            <form onSubmit={this.onSubmit} className=\"mt-2\">\r\n              <div className=\"login-logo\"></div>\r\n              <h3>Login</h3>\r\n              <div className=\"form-group mt-4\">\r\n                <label>Email </label>\r\n                <input\r\n                  type=\"email\"\r\n                  required\r\n                  className=\"form-control\"\r\n                  // placeholder=\"Example@gmail.com\"\r\n                  value={this.state.email}\r\n                  onChange={this.onChangeEmail}\r\n                />\r\n\r\n                <label>Password</label>\r\n                <input\r\n                  type=\"password\"\r\n                  required\r\n                  className=\"form-control\"\r\n                  // placeholder=\"Password\"\r\n                  value={this.state.password}\r\n                  onChange={this.onChangePassword}\r\n                />\r\n              </div>\r\n              <span className={this.state.statusclass}>\r\n                {this.state.status}{\" \"}\r\n              </span>\r\n              <span className={this.state.forgotclass}>\r\n                Forgot your password? click\r\n                <Link className=\"ml-1\" to=\"/forgotpassword\">\r\n                  here\r\n                </Link>\r\n              </span>\r\n\r\n              <input type=\"submit\" value=\"Log in\" className=\"btn mb-4\" />\r\n\r\n              <span className=\"mt-3\">\r\n               Don't have an account?\r\n                <Link className=\"ml-1\" to=\"/createuser\">\r\n                  Register here\r\n                </Link>{\" \"}               \r\n              </span>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      );\r\n    } else {\r\n      window.location = \"/myprofile\";\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}