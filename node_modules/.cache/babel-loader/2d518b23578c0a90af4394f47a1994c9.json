{"ast":null,"code":"var _jsxFileName = \"C:\\\\MANALI\\\\PES\\\\SEM3\\\\WebTech\\\\MERN-project\\\\src\\\\components\\\\request.component.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport \"../../src/index.css\";\nimport Navbar from \"./navbar.component\";\nimport { getFromStorage } from \"../utils/storage\"; // Fontawesome\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCheck } from \"@fortawesome/free-solid-svg-icons\";\n\nconst Order = props => /*#__PURE__*/React.createElement(\"div\", {\n  className: \"myrequest ml-2 mr-2 mb-4\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 12,\n    columnNumber: 3\n  }\n}, /*#__PURE__*/React.createElement(\"p\", {\n  className: \"orderdate\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 13,\n    columnNumber: 5\n  }\n}, \"Order : \", props.order.idpedido), /*#__PURE__*/React.createElement(\"div\", {\n  className: \"ordercontainer d-flex flex-column align-items-center mt-3\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 14,\n    columnNumber: 5\n  }\n}, /*#__PURE__*/React.createElement(\"div\", {\n  className: \"col-md-12 d-flex flex-column orderproducts align-items-center mb-3\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 15,\n    columnNumber: 7\n  }\n}, /*#__PURE__*/React.createElement(\"div\", {\n  className: \"d-flex w-100\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 16,\n    columnNumber: 9\n  }\n}, /*#__PURE__*/React.createElement(\"p\", {\n  className: \"w-100 orderamount\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 17,\n    columnNumber: 11\n  }\n}, /*#__PURE__*/React.createElement(\"span\", {\n  className: \"bold\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 18,\n    columnNumber: 13\n  }\n}, \"(\", props.order.products.length, \") \"), \" \", \"article(s)\")), /*#__PURE__*/React.createElement(\"div\", {\n  className: \"products-container\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 22,\n    columnNumber: 9\n  }\n}, props.order.products.map(item => {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row w-100 justify-content-around mr-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 17\n    }\n  }, item.idproduct, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 17\n    }\n  }, \" \", item.products.amount));\n}))), \"Status : \", props.order.status, /*#__PURE__*/React.createElement(\"br\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 7\n  }\n}), /*#__PURE__*/React.createElement(\"br\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 7\n  }\n}), /*#__PURE__*/React.createElement(\"button\", {\n  onClick: () => {\n    props.changestatus(props.order.idpedido);\n  },\n  className: \"btn btn-sm btn-info mr-2 mb-3\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 7\n  }\n}, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n  icon: faCheck,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 9\n  }\n}), \" Mark as ready\")));\n\nconst Order2 = props => /*#__PURE__*/React.createElement(\"div\", {\n  className: \"myrequest ml-2 mr-2 mb-4\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 3\n  }\n}, /*#__PURE__*/React.createElement(\"p\", {\n  className: \"orderdate\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }\n}, \"Order : \", props.order.idpedido), /*#__PURE__*/React.createElement(\"div\", {\n  className: \"ordercontainer d-flex flex-column align-items-center mt-3\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }\n}, /*#__PURE__*/React.createElement(\"div\", {\n  className: \"col-md-12 d-flex flex-column orderproducts align-items-center mb-3\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 7\n  }\n}, /*#__PURE__*/React.createElement(\"div\", {\n  className: \"d-flex w-100\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 9\n  }\n}, /*#__PURE__*/React.createElement(\"p\", {\n  className: \"w-100 orderamount\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 11\n  }\n}, /*#__PURE__*/React.createElement(\"span\", {\n  className: \"bold\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 13\n  }\n}, \"(\", props.order.products.length, \") \"), \" \", \"article(s)\")), /*#__PURE__*/React.createElement(\"div\", {\n  className: \"products-container\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 9\n  }\n}, props.order.products.map(item => {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row w-100 justify-content-around mr-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, item.idproduct, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }\n  }, \" \", item.products.amount));\n}))), \"Status : \", props.order.status, /*#__PURE__*/React.createElement(\"br\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 7\n  }\n}), /*#__PURE__*/React.createElement(\"br\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 7\n  }\n}), /*#__PURE__*/React.createElement(\"button\", {\n  className: \"btn btn-sm btn-info mr-2 mb-3\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 7\n  }\n}, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n  icon: faCheck,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 9\n  }\n}), \" Ready\")));\n\nexport default class ProductsList extends Component {\n  constructor(props) {\n    super(props);\n    this.changestatus = this.changestatus.bind(this);\n    this.state = {\n      requests: [],\n      cookie: \"\"\n    };\n  }\n\n  componentDidMount() {\n    const {\n      cookie\n    } = getFromStorage(\"the_main_app\");\n    this.setState({\n      cookie: cookie\n    });\n    axios.get(\"http://localhost:5000/Cart/request/\" + cookie._id).then(response => {\n      console.log(response.data);\n      this.setState({\n        requests: response.data\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  changestatus(id) {\n    console.log(\"Changing : \" + id);\n    axios.get(\"http://localhost:5000/Cart/ready/\" + id).then(response => {\n      if (response.data == \"OK\") {\n        console.log(\"OK\");\n        axios.get(\"http://localhost:5000/Cart/request/\" + this.state.cookie._id).then(response => {\n          console.log(response.data);\n          this.setState({\n            requests: response.data\n          });\n        }).catch(error => {\n          console.log(error);\n        });\n      }\n    });\n  }\n\n  RequestList() {\n    return this.state.requests.map(currentorder => {\n      if (currentorder.status == \"in preparation\") {\n        return /*#__PURE__*/React.createElement(Order, {\n          order: currentorder,\n          changestatus: this.changestatus,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 16\n          }\n        });\n      } else {\n        return /*#__PURE__*/React.createElement(Order2, {\n          order: currentorder,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 16\n          }\n        });\n      }\n    });\n  }\n\n  render() {\n    const {\n      cookie\n    } = this.state;\n\n    if (cookie) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Navbar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container mt-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        className: \"mb-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }\n      }, \"My requests\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row d-flex justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 13\n        }\n      }, this.RequestList())));\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Navbar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container mt-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 13\n        }\n      }, \"You must be logged in to see your request\")));\n    }\n  }\n\n}","map":{"version":3,"sources":["C:/MANALI/PES/SEM3/WebTech/MERN-project/src/components/request.component.js"],"names":["React","Component","axios","Navbar","getFromStorage","FontAwesomeIcon","faCheck","Order","props","order","idpedido","products","length","map","item","idproduct","amount","status","changestatus","Order2","ProductsList","constructor","bind","state","requests","cookie","componentDidMount","setState","get","_id","then","response","console","log","data","catch","error","id","RequestList","currentorder","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"../../src/index.css\";\r\nimport Navbar from \"./navbar.component\";\r\nimport { getFromStorage } from \"../utils/storage\";\r\n\r\n// Fontawesome\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faCheck } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nconst Order = (props) => (\r\n  <div className=\"myrequest ml-2 mr-2 mb-4\">\r\n    <p className=\"orderdate\">Order : {props.order.idpedido}</p>\r\n    <div className=\"ordercontainer d-flex flex-column align-items-center mt-3\">\r\n      <div className=\"col-md-12 d-flex flex-column orderproducts align-items-center mb-3\">\r\n        <div className=\"d-flex w-100\">\r\n          <p className=\"w-100 orderamount\">\r\n            <span className=\"bold\">({props.order.products.length}) </span>{\" \"}\r\n            article(s)\r\n          </p>\r\n        </div>\r\n        <div className=\"products-container\">\r\n          {props.order.products.map((item) => {\r\n            return (\r\n              <div className=\"row w-100 justify-content-around mr-0\">\r\n                <p>{item.idproduct} </p>\r\n                <p> {item.products.amount}</p>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n      Status : {props.order.status}\r\n      <br />\r\n      <br />\r\n      <button\r\n        onClick={() => {\r\n          props.changestatus(props.order.idpedido);\r\n        }}\r\n        className=\"btn btn-sm btn-info mr-2 mb-3\"\r\n      >\r\n        <FontAwesomeIcon icon={faCheck} /> Mark as ready\r\n      </button>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst Order2 = (props) => (\r\n  <div className=\"myrequest ml-2 mr-2 mb-4\">\r\n    <p className=\"orderdate\">Order : {props.order.idpedido}</p>\r\n    <div className=\"ordercontainer d-flex flex-column align-items-center mt-3\">\r\n      <div className=\"col-md-12 d-flex flex-column orderproducts align-items-center mb-3\">\r\n        <div className=\"d-flex w-100\">\r\n          <p className=\"w-100 orderamount\">\r\n            <span className=\"bold\">({props.order.products.length}) </span>{\" \"}\r\n            article(s)\r\n          </p>\r\n        </div>\r\n        <div className=\"products-container\">\r\n          {props.order.products.map((item) => {\r\n            return (\r\n              <div className=\"row w-100 justify-content-around mr-0\">\r\n                <p>{item.idproduct} </p>\r\n                <p> {item.products.amount}</p>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n      Status : {props.order.status}\r\n      <br />\r\n      <br />\r\n      <button className=\"btn btn-sm btn-info mr-2 mb-3\">\r\n        <FontAwesomeIcon icon={faCheck} /> Ready\r\n      </button>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default class ProductsList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.changestatus = this.changestatus.bind(this);\r\n    this.state = {\r\n      requests: [],\r\n      cookie: \"\",\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { cookie } = getFromStorage(\"the_main_app\");\r\n\r\n    this.setState({\r\n      cookie: cookie,\r\n    });\r\n\r\n    axios\r\n      .get(\"http://localhost:5000/Cart/request/\" + cookie._id)\r\n      .then((response) => {\r\n        console.log(response.data);\r\n        this.setState({\r\n          requests: response.data,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  changestatus(id) {\r\n    console.log(\"Changing : \" + id);\r\n    \r\n    axios.get(\"http://localhost:5000/Cart/ready/\" + id).then((response) => {\r\n      if (response.data == \"OK\") {\r\n        console.log(\"OK\");\r\n        axios\r\n        .get(\"http://localhost:5000/Cart/request/\" + this.state.cookie._id)\r\n        .then((response) => {\r\n          console.log(response.data);\r\n          this.setState({\r\n            requests: response.data,\r\n          });\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  RequestList() {\r\n    return this.state.requests.map((currentorder) => {\r\n      if (currentorder.status == \"in preparation\") {\r\n        return <Order order={currentorder} changestatus={this.changestatus} />;\r\n      } else {\r\n        return <Order2 order={currentorder} />;\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { cookie } = this.state;\r\n    if (cookie) {\r\n      return (\r\n        <div>\r\n          <Navbar />\r\n\r\n          <div className=\"container mt-5\">\r\n            <h2 className=\"mb-5\">My requests</h2>\r\n            <div className=\"row d-flex justify-content-center\">\r\n              {this.RequestList()}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          <Navbar />\r\n          <div className=\"container mt-5\">\r\n            <h2>You must be logged in to see your request</h2>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}