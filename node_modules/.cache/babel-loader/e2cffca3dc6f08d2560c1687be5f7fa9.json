{"ast":null,"code":"var _jsxFileName = \"C:\\\\MANALI\\\\PES\\\\SEM3\\\\WebTech\\\\PROJECTS\\\\MERN-project\\\\src\\\\components\\\\notify.component.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport Navbar from \"../components/navbar.component\";\nimport { getFromStorage } from \"../utils/storage\";\n\nconst Product = props => /*#__PURE__*/React.createElement(\"option\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 6,\n    columnNumber: 28\n  }\n}, props.product.product);\n\nexport default class CreateProduct extends Component {\n  constructor(props) {\n    super(props);\n    this.onChangeTitle = this.onChangeTitle.bind(this);\n    this.onChangeBody = this.onChangeBody.bind(this);\n    this.onChangePrice = this.onChangePrice.bind(this);\n    this.onChangeProduct = this.onChangeProduct.bind(this);\n    this.productList = this.productList.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.state = {\n      cookie: \"\",\n      title: \"\",\n      body: \"\",\n      price: \"\",\n      product: \"\",\n      selectedproduct: {},\n      products: []\n    };\n  }\n\n  productList() {\n    return this.state.products.map(currentproduct => {\n      return /*#__PURE__*/React.createElement(Product, {\n        product: currentproduct,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 14\n        }\n      });\n    });\n  }\n\n  componentDidMount() {\n    const obj = getFromStorage(\"the_main_app\");\n\n    if (obj && obj.cookie) {\n      const {\n        cookie\n      } = obj;\n      this.setState({\n        cookie: cookie\n      });\n      axios.get(\"http://localhost:5000/products/getuser/\" + cookie._id).then(response => {\n        this.setState({\n          products: response.data\n        });\n        console.log(response.data);\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n  }\n\n  onChangeTitle(e) {\n    this.setState({\n      title: e.target.value\n    });\n  }\n\n  onChangeBody(e) {\n    this.setState({\n      body: e.target.value\n    });\n  }\n\n  onChangePrice(e) {\n    this.setState({\n      price: e.target.value\n    });\n  }\n\n  onChangeProduct(e) {\n    this.state.products.forEach(element => {\n      if (element.product == e.target.value) {\n        this.setState({\n          selectedproduct: element\n        });\n      }\n    });\n    this.setState({\n      product: e.target.value\n    });\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    let info = {\n      userid: this.state.cookie._id,\n      username: this.state.cookie.username,\n      title: this.state.title,\n      body: this.state.body,\n      price: this.state.price,\n      product: this.state.selectedproduct\n    };\n    console.log(info);\n    axios.post(\"http://localhost:5000/users/testemail\", info);\n    this.setState({\n      title: \"\",\n      body: \"\",\n      price: \"\",\n      product: \"\"\n    });\n  }\n\n  render() {\n    const {\n      cookie\n    } = this.state;\n\n    if (cookie) {\n      if (cookie.role == \"Client\") {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(Navbar, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }\n        }), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"container mt-5\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"h2\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 15\n          }\n        }, \"You dont have permissions to create a product as a Client\")));\n      } else {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"gray\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(Navbar, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }\n        }), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"container mt-5\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"h3\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 15\n          }\n        }, \"Notify your clients\"), /*#__PURE__*/React.createElement(\"form\", {\n          onSubmit: this.onSubmit,\n          className: \"create-product mt-5\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"form-group \",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"label\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 21\n          }\n        }, \"Email title: \"), /*#__PURE__*/React.createElement(\"input\", {\n          type: \"text\",\n          required: true,\n          className: \"form-control\",\n          value: this.state.title,\n          onChange: this.onChangeTitle,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 21\n          }\n        })), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"form-group \",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"label\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 21\n          }\n        }, \"Email body : \"), /*#__PURE__*/React.createElement(\"textarea\", {\n          type: \"text\",\n          required: true,\n          className: \"form-control notify\",\n          value: this.state.body,\n          onChange: this.onChangeBody,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 21\n          }\n        }))), /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"form-group\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"label\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 21\n          }\n        }, \"Price: \"), /*#__PURE__*/React.createElement(\"input\", {\n          type: \"number\",\n          required: true,\n          className: \"form-control\",\n          value: this.state.price,\n          onChange: this.onChangePrice,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 21\n          }\n        })), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"form-group\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"label\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 21\n          }\n        }, \"Product : \"), /*#__PURE__*/React.createElement(\"select\", {\n          className: \"form-control\",\n          required: true,\n          onChange: this.onChangeProduct,\n          value: this.state.product,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"option\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 23\n          }\n        }), this.productList())), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"form-group\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"input\", {\n          type: \"submit\",\n          value: \"Send notification\",\n          className: \"createbutton\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 21\n          }\n        }))))));\n      }\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Navbar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container mt-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 13\n        }\n      }, \"You must be logged in to create a product\")));\n    }\n  }\n\n}","map":{"version":3,"sources":["C:/MANALI/PES/SEM3/WebTech/PROJECTS/MERN-project/src/components/notify.component.js"],"names":["React","Component","axios","Navbar","getFromStorage","Product","props","product","CreateProduct","constructor","onChangeTitle","bind","onChangeBody","onChangePrice","onChangeProduct","productList","onSubmit","state","cookie","title","body","price","selectedproduct","products","map","currentproduct","componentDidMount","obj","setState","get","_id","then","response","data","console","log","catch","error","e","target","value","forEach","element","preventDefault","info","userid","username","post","render","role"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,gCAAnB;AACA,SAASC,cAAT,QAA+B,kBAA/B;;AAEA,MAAMC,OAAO,GAAIC,KAAD,iBAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAASA,KAAK,CAACC,OAAN,CAAcA,OAAvB,CAA3B;;AAEA,eAAe,MAAMC,aAAN,SAA4BP,SAA5B,CAAsC;AACnDQ,EAAAA,WAAW,CAACH,KAAD,EAAQ;AACjB,UAAMA,KAAN;AAEA,SAAKI,aAAL,GAAqB,KAAKA,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBD,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKE,aAAL,GAAqB,KAAKA,aAAL,CAAmBF,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKG,eAAL,GAAuB,KAAKA,eAAL,CAAqBH,IAArB,CAA0B,IAA1B,CAAvB;AACA,SAAKI,WAAL,GAAmB,KAAKA,WAAL,CAAiBJ,IAAjB,CAAsB,IAAtB,CAAnB;AAEA,SAAKK,QAAL,GAAgB,KAAKA,QAAL,CAAcL,IAAd,CAAmB,IAAnB,CAAhB;AAEA,SAAKM,KAAL,GAAa;AACXC,MAAAA,MAAM,EAAE,EADG;AAGXC,MAAAA,KAAK,EAAE,EAHI;AAIXC,MAAAA,IAAI,EAAE,EAJK;AAKXC,MAAAA,KAAK,EAAE,EALI;AAMXd,MAAAA,OAAO,EAAE,EANE;AAQXe,MAAAA,eAAe,EAAE,EARN;AASXC,MAAAA,QAAQ,EAAE;AATC,KAAb;AAWD;;AAEDR,EAAAA,WAAW,GAAG;AACZ,WAAO,KAAKE,KAAL,CAAWM,QAAX,CAAoBC,GAApB,CAAyBC,cAAD,IAAoB;AACjD,0BAAO,oBAAC,OAAD;AAAS,QAAA,OAAO,EAAEA,cAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACD,KAFM,CAAP;AAGD;;AAEDC,EAAAA,iBAAiB,GAAG;AAClB,UAAMC,GAAG,GAAGvB,cAAc,CAAC,cAAD,CAA1B;;AAEA,QAAIuB,GAAG,IAAIA,GAAG,CAACT,MAAf,EAAuB;AACrB,YAAM;AAAEA,QAAAA;AAAF,UAAaS,GAAnB;AAEA,WAAKC,QAAL,CAAc;AACZV,QAAAA,MAAM,EAAEA;AADI,OAAd;AAIAhB,MAAAA,KAAK,CACF2B,GADH,CACO,4CAA4CX,MAAM,CAACY,GAD1D,EAEGC,IAFH,CAESC,QAAD,IAAc;AAClB,aAAKJ,QAAL,CAAc;AACZL,UAAAA,QAAQ,EAAES,QAAQ,CAACC;AADP,SAAd;AAGAC,QAAAA,OAAO,CAACC,GAAR,CAAYH,QAAQ,CAACC,IAArB;AACD,OAPH,EAQGG,KARH,CAQUC,KAAD,IAAW;AAChBH,QAAAA,OAAO,CAACC,GAAR,CAAYE,KAAZ;AACD,OAVH;AAWD;AACF;;AAED3B,EAAAA,aAAa,CAAC4B,CAAD,EAAI;AACf,SAAKV,QAAL,CAAc;AACZT,MAAAA,KAAK,EAAEmB,CAAC,CAACC,MAAF,CAASC;AADJ,KAAd;AAGD;;AACD5B,EAAAA,YAAY,CAAC0B,CAAD,EAAI;AACd,SAAKV,QAAL,CAAc;AACZR,MAAAA,IAAI,EAAEkB,CAAC,CAACC,MAAF,CAASC;AADH,KAAd;AAGD;;AACD3B,EAAAA,aAAa,CAACyB,CAAD,EAAI;AACf,SAAKV,QAAL,CAAc;AACZP,MAAAA,KAAK,EAAEiB,CAAC,CAACC,MAAF,CAASC;AADJ,KAAd;AAGD;;AACD1B,EAAAA,eAAe,CAACwB,CAAD,EAAI;AACjB,SAAKrB,KAAL,CAAWM,QAAX,CAAoBkB,OAApB,CAA6BC,OAAD,IAAa;AACvC,UAAIA,OAAO,CAACnC,OAAR,IAAmB+B,CAAC,CAACC,MAAF,CAASC,KAAhC,EAAuC;AACrC,aAAKZ,QAAL,CAAc;AAAEN,UAAAA,eAAe,EAAEoB;AAAnB,SAAd;AACD;AACF,KAJD;AAMA,SAAKd,QAAL,CAAc;AACZrB,MAAAA,OAAO,EAAE+B,CAAC,CAACC,MAAF,CAASC;AADN,KAAd;AAGD;;AAEDxB,EAAAA,QAAQ,CAACsB,CAAD,EAAI;AACVA,IAAAA,CAAC,CAACK,cAAF;AAEA,QAAIC,IAAI,GAAG;AACTC,MAAAA,MAAM,EAAE,KAAK5B,KAAL,CAAWC,MAAX,CAAkBY,GADjB;AAETgB,MAAAA,QAAQ,EAAE,KAAK7B,KAAL,CAAWC,MAAX,CAAkB4B,QAFnB;AAGT3B,MAAAA,KAAK,EAAE,KAAKF,KAAL,CAAWE,KAHT;AAITC,MAAAA,IAAI,EAAE,KAAKH,KAAL,CAAWG,IAJR;AAKTC,MAAAA,KAAK,EAAE,KAAKJ,KAAL,CAAWI,KALT;AAMTd,MAAAA,OAAO,EAAE,KAAKU,KAAL,CAAWK;AANX,KAAX;AAQAY,IAAAA,OAAO,CAACC,GAAR,CAAYS,IAAZ;AACA1C,IAAAA,KAAK,CAAC6C,IAAN,CAAW,uCAAX,EAAoDH,IAApD;AACA,SAAKhB,QAAL,CAAc;AACZT,MAAAA,KAAK,EAAE,EADK;AAEZC,MAAAA,IAAI,EAAE,EAFM;AAGZC,MAAAA,KAAK,EAAE,EAHK;AAIZd,MAAAA,OAAO,EAAE;AAJG,KAAd;AAMD;;AAEDyC,EAAAA,MAAM,GAAG;AACP,UAAM;AAAE9B,MAAAA;AAAF,QAAa,KAAKD,KAAxB;;AACA,QAAIC,MAAJ,EAAY;AACV,UAAIA,MAAM,CAAC+B,IAAP,IAAe,QAAnB,EAA6B;AAC3B,4BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,eAEE;AAAK,UAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uEADF,CAFF,CADF;AAQD,OATD,MASO;AACL,4BACE;AAAK,UAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,eAEE;AAAK,UAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCADF,eAEE;AAAM,UAAA,QAAQ,EAAE,KAAKjC,QAArB;AAA+B,UAAA,SAAS,EAAC,qBAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AAAK,UAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF,eAEE;AACE,UAAA,IAAI,EAAC,MADP;AAEE,UAAA,QAAQ,MAFV;AAGE,UAAA,SAAS,EAAC,cAHZ;AAIE,UAAA,KAAK,EAAE,KAAKC,KAAL,CAAWE,KAJpB;AAKE,UAAA,QAAQ,EAAE,KAAKT,aALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFF,CADF,eAYE;AAAK,UAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF,eAEE;AACE,UAAA,IAAI,EAAC,MADP;AAEE,UAAA,QAAQ,MAFV;AAGE,UAAA,SAAS,EAAC,qBAHZ;AAIE,UAAA,KAAK,EAAE,KAAKO,KAAL,CAAWG,IAJpB;AAKE,UAAA,QAAQ,EAAE,KAAKR,YALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFF,CAZF,CADF,eAwBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AAAK,UAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,eAEE;AACE,UAAA,IAAI,EAAC,QADP;AAEE,UAAA,QAAQ,MAFV;AAGE,UAAA,SAAS,EAAC,cAHZ;AAIE,UAAA,KAAK,EAAE,KAAKK,KAAL,CAAWI,KAJpB;AAKE,UAAA,QAAQ,EAAE,KAAKR,aALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFF,CADF,eAWE;AAAK,UAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AACE,UAAA,SAAS,EAAC,cADZ;AAEE,UAAA,QAAQ,MAFV;AAGE,UAAA,QAAQ,EAAE,KAAKC,eAHjB;AAIE,UAAA,KAAK,EAAE,KAAKG,KAAL,CAAWV,OAJpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UANF,EAOG,KAAKQ,WAAL,EAPH,CAFF,CAXF,eAuBE;AAAK,UAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AACE,UAAA,IAAI,EAAC,QADP;AAEE,UAAA,KAAK,EAAC,mBAFR;AAGE,UAAA,SAAS,EAAC,cAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,CAvBF,CAxBF,CAFF,CAFF,CADF;AAgED;AACF,KA5ED,MA4EO;AACL,0BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAEE;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qDADF,CAFF,CADF;AAQD;AACF;;AA/LkD","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport Navbar from \"../components/navbar.component\";\r\nimport { getFromStorage } from \"../utils/storage\";\r\n\r\nconst Product = (props) => <option>{props.product.product}</option>;\r\n\r\nexport default class CreateProduct extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.onChangeTitle = this.onChangeTitle.bind(this);\r\n    this.onChangeBody = this.onChangeBody.bind(this);\r\n    this.onChangePrice = this.onChangePrice.bind(this);\r\n    this.onChangeProduct = this.onChangeProduct.bind(this);\r\n    this.productList = this.productList.bind(this);\r\n\r\n    this.onSubmit = this.onSubmit.bind(this);\r\n\r\n    this.state = {\r\n      cookie: \"\",\r\n\r\n      title: \"\",\r\n      body: \"\",\r\n      price: \"\",\r\n      product: \"\",\r\n\r\n      selectedproduct: {},\r\n      products: [],\r\n    };\r\n  }\r\n\r\n  productList() {\r\n    return this.state.products.map((currentproduct) => {\r\n      return <Product product={currentproduct} />;\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    const obj = getFromStorage(\"the_main_app\");\r\n\r\n    if (obj && obj.cookie) {\r\n      const { cookie } = obj;\r\n\r\n      this.setState({\r\n        cookie: cookie,\r\n      });\r\n\r\n      axios\r\n        .get(\"http://localhost:5000/products/getuser/\" + cookie._id)\r\n        .then((response) => {\r\n          this.setState({\r\n            products: response.data,\r\n          });\r\n          console.log(response.data);\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n    }\r\n  }\r\n\r\n  onChangeTitle(e) {\r\n    this.setState({\r\n      title: e.target.value,\r\n    });\r\n  }\r\n  onChangeBody(e) {\r\n    this.setState({\r\n      body: e.target.value,\r\n    });\r\n  }\r\n  onChangePrice(e) {\r\n    this.setState({\r\n      price: e.target.value,\r\n    });\r\n  }\r\n  onChangeProduct(e) {\r\n    this.state.products.forEach((element) => {\r\n      if (element.product == e.target.value) {\r\n        this.setState({ selectedproduct: element });\r\n      }\r\n    });\r\n\r\n    this.setState({\r\n      product: e.target.value,\r\n    });\r\n  }\r\n\r\n  onSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    let info = {\r\n      userid: this.state.cookie._id,\r\n      username: this.state.cookie.username,\r\n      title: this.state.title,\r\n      body: this.state.body,\r\n      price: this.state.price,\r\n      product: this.state.selectedproduct,\r\n    };\r\n    console.log(info);\r\n    axios.post(\"http://localhost:5000/users/testemail\", info);\r\n    this.setState({\r\n      title: \"\",\r\n      body: \"\",\r\n      price: \"\",\r\n      product: \"\",\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { cookie } = this.state;\r\n    if (cookie) {\r\n      if (cookie.role == \"Client\") {\r\n        return (\r\n          <div>\r\n            <Navbar />\r\n            <div className=\"container mt-5\">\r\n              <h2>You dont have permissions to create a product as a Client</h2>\r\n            </div>\r\n          </div>\r\n        );\r\n      } else {\r\n        return (\r\n          <div className=\"gray\">\r\n            <Navbar />\r\n            <div className=\"container mt-5\">\r\n              <h3>Notify your clients</h3>\r\n              <form onSubmit={this.onSubmit} className=\"create-product mt-5\">\r\n                <div>\r\n                  <div className=\"form-group \">\r\n                    <label>Email title: </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      required\r\n                      className=\"form-control\"\r\n                      value={this.state.title}\r\n                      onChange={this.onChangeTitle}\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"form-group \">\r\n                    <label>Email body : </label>\r\n                    <textarea\r\n                      type=\"text\"\r\n                      required\r\n                      className=\"form-control notify\"\r\n                      value={this.state.body}\r\n                      onChange={this.onChangeBody}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  <div className=\"form-group\">\r\n                    <label>Price: </label>\r\n                    <input\r\n                      type=\"number\"\r\n                      required\r\n                      className=\"form-control\"\r\n                      value={this.state.price}\r\n                      onChange={this.onChangePrice}\r\n                    />\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label>Product : </label>\r\n                    <select\r\n                      className=\"form-control\"\r\n                      required\r\n                      onChange={this.onChangeProduct}\r\n                      value={this.state.product}\r\n                    >\r\n                      <option></option>\r\n                      {this.productList()}\r\n                    </select>\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <input\r\n                      type=\"submit\"\r\n                      value=\"Send notification\"\r\n                      className=\"createbutton\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n    } else {\r\n      return (\r\n        <div>\r\n          <Navbar />\r\n          <div className=\"container mt-5\">\r\n            <h2>You must be logged in to create a product</h2>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}